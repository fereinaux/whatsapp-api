"use strict";Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var _FileTokenStore = require("./FileTokenStore/FileTokenStore");

class FileTokenStore {

  constructor(client) {
    this.client = client;
  }
  tokenStore = new _FileTokenStore.FileTokenStore({
    encodeFunction: (data) => {
      return this.encodeFunction(data, this.client.config);
    },
    decodeFunction: (text) => {
      return this.decodeFunction(text, this.client);
    }
  });

  encodeFunction(data, config) {
    data.config = config;
    return JSON.stringify(data);
  }

  async decodeFunction(text, client) {
    const object = JSON.parse(text);
    if (object.config && Object.keys(client.config).length === 0)
    client.config = object.config;
    if (object.webhook && Object.keys(client.config).length === 0)
    client.config.webhook = object.webhook;
    return object;
  }
}var _default = exports.default =

FileTokenStore;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfRmlsZVRva2VuU3RvcmUiLCJyZXF1aXJlIiwiRmlsZVRva2VuU3RvcmUiLCJjb25zdHJ1Y3RvciIsImNsaWVudCIsInRva2VuU3RvcmUiLCJmc1Rva2VuU3RvcmUiLCJlbmNvZGVGdW5jdGlvbiIsImRhdGEiLCJjb25maWciLCJkZWNvZGVGdW5jdGlvbiIsInRleHQiLCJKU09OIiwic3RyaW5naWZ5Iiwib2JqZWN0IiwicGFyc2UiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwid2ViaG9vayIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvdXRpbC90b2tlblN0b3JlL2ZpbGVUb2tlblN0b3J5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZpbGVUb2tlblN0b3JlIGFzIGZzVG9rZW5TdG9yZSB9IGZyb20gJy4vRmlsZVRva2VuU3RvcmUvRmlsZVRva2VuU3RvcmUnO1xyXG5cclxuY2xhc3MgRmlsZVRva2VuU3RvcmUge1xyXG4gIGRlY2xhcmUgY2xpZW50OiBhbnk7XHJcbiAgY29uc3RydWN0b3IoY2xpZW50OiBhbnkpIHtcclxuICAgIHRoaXMuY2xpZW50ID0gY2xpZW50O1xyXG4gIH1cclxuICB0b2tlblN0b3JlID0gbmV3IGZzVG9rZW5TdG9yZSh7XHJcbiAgICBlbmNvZGVGdW5jdGlvbjogKGRhdGEpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlRnVuY3Rpb24oZGF0YSwgdGhpcy5jbGllbnQuY29uZmlnKTtcclxuICAgIH0sXHJcbiAgICBkZWNvZGVGdW5jdGlvbjogKHRleHQpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuZGVjb2RlRnVuY3Rpb24odGV4dCwgdGhpcy5jbGllbnQpO1xyXG4gICAgfSxcclxuICB9KTtcclxuXHJcbiAgcHVibGljIGVuY29kZUZ1bmN0aW9uKGRhdGE6IGFueSwgY29uZmlnOiBhbnkpIHtcclxuICAgIGRhdGEuY29uZmlnID0gY29uZmlnO1xyXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgcHVibGljIGFzeW5jIGRlY29kZUZ1bmN0aW9uKHRleHQ6IHN0cmluZywgY2xpZW50OiBhbnkpOiBQcm9taXNlPHN0cmluZ1tdPiB7XHJcbiAgICBjb25zdCBvYmplY3QgPSBKU09OLnBhcnNlKHRleHQpO1xyXG4gICAgaWYgKG9iamVjdC5jb25maWcgJiYgT2JqZWN0LmtleXMoY2xpZW50LmNvbmZpZykubGVuZ3RoID09PSAwKVxyXG4gICAgICBjbGllbnQuY29uZmlnID0gb2JqZWN0LmNvbmZpZztcclxuICAgIGlmIChvYmplY3Qud2ViaG9vayAmJiBPYmplY3Qua2V5cyhjbGllbnQuY29uZmlnKS5sZW5ndGggPT09IDApXHJcbiAgICAgIGNsaWVudC5jb25maWcud2ViaG9vayA9IG9iamVjdC53ZWJob29rO1xyXG4gICAgcmV0dXJuIG9iamVjdDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZpbGVUb2tlblN0b3JlO1xyXG4iXSwibWFwcGluZ3MiOiJvR0FBQSxJQUFBQSxlQUFBLEdBQUFDLE9BQUE7O0FBRUEsTUFBTUMsY0FBYyxDQUFDOztFQUVuQkMsV0FBV0EsQ0FBQ0MsTUFBVyxFQUFFO0lBQ3ZCLElBQUksQ0FBQ0EsTUFBTSxHQUFHQSxNQUFNO0VBQ3RCO0VBQ0FDLFVBQVUsR0FBRyxJQUFJQyw4QkFBWSxDQUFDO0lBQzVCQyxjQUFjLEVBQUVBLENBQUNDLElBQUksS0FBSztNQUN4QixPQUFPLElBQUksQ0FBQ0QsY0FBYyxDQUFDQyxJQUFJLEVBQUUsSUFBSSxDQUFDSixNQUFNLENBQUNLLE1BQU0sQ0FBQztJQUN0RCxDQUFDO0lBQ0RDLGNBQWMsRUFBRUEsQ0FBQ0MsSUFBSSxLQUFLO01BQ3hCLE9BQU8sSUFBSSxDQUFDRCxjQUFjLENBQUNDLElBQUksRUFBRSxJQUFJLENBQUNQLE1BQU0sQ0FBQztJQUMvQztFQUNGLENBQUMsQ0FBQzs7RUFFS0csY0FBY0EsQ0FBQ0MsSUFBUyxFQUFFQyxNQUFXLEVBQUU7SUFDNUNELElBQUksQ0FBQ0MsTUFBTSxHQUFHQSxNQUFNO0lBQ3BCLE9BQU9HLElBQUksQ0FBQ0MsU0FBUyxDQUFDTCxJQUFJLENBQUM7RUFDN0I7O0VBRUEsTUFBYUUsY0FBY0EsQ0FBQ0MsSUFBWSxFQUFFUCxNQUFXLEVBQXFCO0lBQ3hFLE1BQU1VLE1BQU0sR0FBR0YsSUFBSSxDQUFDRyxLQUFLLENBQUNKLElBQUksQ0FBQztJQUMvQixJQUFJRyxNQUFNLENBQUNMLE1BQU0sSUFBSU8sTUFBTSxDQUFDQyxJQUFJLENBQUNiLE1BQU0sQ0FBQ0ssTUFBTSxDQUFDLENBQUNTLE1BQU0sS0FBSyxDQUFDO0lBQzFEZCxNQUFNLENBQUNLLE1BQU0sR0FBR0ssTUFBTSxDQUFDTCxNQUFNO0lBQy9CLElBQUlLLE1BQU0sQ0FBQ0ssT0FBTyxJQUFJSCxNQUFNLENBQUNDLElBQUksQ0FBQ2IsTUFBTSxDQUFDSyxNQUFNLENBQUMsQ0FBQ1MsTUFBTSxLQUFLLENBQUM7SUFDM0RkLE1BQU0sQ0FBQ0ssTUFBTSxDQUFDVSxPQUFPLEdBQUdMLE1BQU0sQ0FBQ0ssT0FBTztJQUN4QyxPQUFPTCxNQUFNO0VBQ2Y7QUFDRixDQUFDLElBQUFNLFFBQUEsR0FBQUMsT0FBQSxDQUFBQyxPQUFBOztBQUVjcEIsY0FBYyIsImlnbm9yZUxpc3QiOltdfQ==
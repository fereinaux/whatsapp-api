"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports, "__esModule", { value: true });exports.initServer = initServer;exports.logger = void 0;















var _wppconnect = require("@wppconnect-team/wppconnect");
var _cors = _interopRequireDefault(require("cors"));
var _express = _interopRequireDefault(require("express"));
var _expressQueryBoolean = _interopRequireDefault(require("express-query-boolean"));
var _http = require("http");
var _mergeDeep = _interopRequireDefault(require("merge-deep"));
var _process = _interopRequireDefault(require("process"));
var _socket = require("socket.io");

var _package = require("../package.json");
var _config = _interopRequireDefault(require("./config"));
var _index = require("./mapper/index");
var _routes = _interopRequireDefault(require("./routes"));
var _functions = require("./util/functions");




var _logger = require("./util/logger"); /*
 * Copyright 2021 WPPConnect Team
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ //require('dotenv').config();
const logger = exports.logger = (0, _logger.createLogger)(_config.default.log);function initServer(serverOptions) {if (typeof serverOptions !== 'object') {serverOptions = {};}serverOptions = (0, _mergeDeep.default)({}, _config.default, serverOptions);_wppconnect.defaultLogger.level = serverOptions.log.level;(0, _functions.setMaxListners)(serverOptions);
  const app = (0, _express.default)();
  const PORT = _process.default.env.PORT || serverOptions.port;

  app.use(
    (0, _cors.default)({
      origin: '*'
    })
  );
  app.use(_express.default.json({ limit: '50mb' }));
  app.use(_express.default.urlencoded({ limit: '50mb', extended: true }));
  app.use('/files', _express.default.static('WhatsAppImages'));
  app.use((0, _expressQueryBoolean.default)());

  if (_config.default?.aws_s3?.access_key_id && _config.default?.aws_s3?.secret_key) {
    _process.default.env['AWS_ACCESS_KEY_ID'] = _config.default.aws_s3.access_key_id;
    _process.default.env['AWS_SECRET_ACCESS_KEY'] = _config.default.aws_s3.secret_key;
  }

  // Add request options
  app.use((req, res, next) => {
    req.serverOptions = serverOptions;
    req.logger = logger;
    req.io = io;

    const oldSend = res.send;

    res.send = async function (data) {
      const content = req.headers['content-type'];
      if (content == 'application/json') {
        data = JSON.parse(data);
        if (!data.session) data.session = req.client ? req.client.session : '';
        if (data.mapper && req.serverOptions.mapper.enable) {
          data.response = await (0, _index.convert)(
            req.serverOptions.mapper.prefix,
            data.response,
            data.mapper
          );
          delete data.mapper;
        }
      }
      res.send = oldSend;
      return res.send(data);
    };
    next();
  });

  app.use(_routes.default);

  (0, _functions.createFolders)();
  const http = (0, _http.createServer)(app);
  const io = new _socket.Server(http, {
    cors: {
      origin: '*'
    }
  });

  io.on('connection', (sock) => {
    logger.info(`ID: ${sock.id} entrou`);

    sock.on('disconnect', () => {
      logger.info(`ID: ${sock.id} saiu`);
    });
  });

  http.listen(PORT, () => {
    logger.info(`Server is running on port: ${PORT}`);
    logger.info(
      `\x1b[31m Visit ${serverOptions.host}:${PORT}/api-docs for Swagger docs`
    );
    logger.info(`WPPConnect-Server version: ${_package.version}`);

    if (serverOptions.startAllSession) (0, _functions.startAllSessions)(serverOptions, logger);
  });

  if (_config.default.log.level === 'error' || _config.default.log.level === 'warn') {
    console.log(`\x1b[33m ======================================================
Attention:
Your configuration is configured to show only a few logs, before opening an issue, 
please set the log to 'silly', copy the log that shows the error and open your issue.
======================================================
`);
  }

  return {
    app,
    routes: _routes.default,
    logger
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfd3BwY29ubmVjdCIsInJlcXVpcmUiLCJfY29ycyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfZXhwcmVzcyIsIl9leHByZXNzUXVlcnlCb29sZWFuIiwiX2h0dHAiLCJfbWVyZ2VEZWVwIiwiX3Byb2Nlc3MiLCJfc29ja2V0IiwiX3BhY2thZ2UiLCJfY29uZmlnIiwiX2luZGV4IiwiX3JvdXRlcyIsIl9mdW5jdGlvbnMiLCJfbG9nZ2VyIiwibG9nZ2VyIiwiZXhwb3J0cyIsImNyZWF0ZUxvZ2dlciIsImNvbmZpZyIsImxvZyIsImluaXRTZXJ2ZXIiLCJzZXJ2ZXJPcHRpb25zIiwibWVyZ2VEZWVwIiwiZGVmYXVsdExvZ2dlciIsImxldmVsIiwic2V0TWF4TGlzdG5lcnMiLCJhcHAiLCJleHByZXNzIiwiUE9SVCIsInByb2Nlc3MiLCJlbnYiLCJwb3J0IiwidXNlIiwiY29ycyIsIm9yaWdpbiIsImpzb24iLCJsaW1pdCIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsInN0YXRpYyIsImJvb2xQYXJzZXIiLCJhd3NfczMiLCJhY2Nlc3Nfa2V5X2lkIiwic2VjcmV0X2tleSIsInJlcSIsInJlcyIsIm5leHQiLCJpbyIsIm9sZFNlbmQiLCJzZW5kIiwiZGF0YSIsImNvbnRlbnQiLCJoZWFkZXJzIiwiSlNPTiIsInBhcnNlIiwic2Vzc2lvbiIsImNsaWVudCIsIm1hcHBlciIsImVuYWJsZSIsInJlc3BvbnNlIiwiY29udmVydCIsInByZWZpeCIsInJvdXRlcyIsImNyZWF0ZUZvbGRlcnMiLCJodHRwIiwiY3JlYXRlU2VydmVyIiwiU29ja2V0Iiwib24iLCJzb2NrIiwiaW5mbyIsImlkIiwibGlzdGVuIiwiaG9zdCIsInZlcnNpb24iLCJzdGFydEFsbFNlc3Npb24iLCJzdGFydEFsbFNlc3Npb25zIiwiY29uc29sZSJdLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiBDb3B5cmlnaHQgMjAyMSBXUFBDb25uZWN0IFRlYW1cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgZGVmYXVsdExvZ2dlciB9IGZyb20gJ0B3cHBjb25uZWN0LXRlYW0vd3BwY29ubmVjdCc7XHJcbmltcG9ydCBjb3JzIGZyb20gJ2NvcnMnO1xyXG5pbXBvcnQgZXhwcmVzcywgeyBOZXh0RnVuY3Rpb24gfSBmcm9tICdleHByZXNzJztcclxuaW1wb3J0IGJvb2xQYXJzZXIgZnJvbSAnZXhwcmVzcy1xdWVyeS1ib29sZWFuJztcclxuaW1wb3J0IHsgY3JlYXRlU2VydmVyIH0gZnJvbSAnaHR0cCc7XHJcbmltcG9ydCBtZXJnZURlZXAgZnJvbSAnbWVyZ2UtZGVlcCc7XHJcbmltcG9ydCBwcm9jZXNzIGZyb20gJ3Byb2Nlc3MnO1xyXG5pbXBvcnQgeyBTZXJ2ZXIgYXMgU29ja2V0IH0gZnJvbSAnc29ja2V0LmlvJztcclxuXHJcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tICcuLi9wYWNrYWdlLmpzb24nO1xyXG5pbXBvcnQgY29uZmlnIGZyb20gJy4vY29uZmlnJztcclxuaW1wb3J0IHsgY29udmVydCB9IGZyb20gJy4vbWFwcGVyL2luZGV4JztcclxuaW1wb3J0IHJvdXRlcyBmcm9tICcuL3JvdXRlcyc7XHJcbmltcG9ydCB7XHJcbiAgY3JlYXRlRm9sZGVycyxcclxuICBzZXRNYXhMaXN0bmVycyxcclxuICBzdGFydEFsbFNlc3Npb25zLFxyXG59IGZyb20gJy4vdXRpbC9mdW5jdGlvbnMnO1xyXG5pbXBvcnQgeyBjcmVhdGVMb2dnZXIgfSBmcm9tICcuL3V0aWwvbG9nZ2VyJztcclxuXHJcbi8vcmVxdWlyZSgnZG90ZW52JykuY29uZmlnKCk7XHJcblxyXG5leHBvcnQgY29uc3QgbG9nZ2VyID0gY3JlYXRlTG9nZ2VyKGNvbmZpZy5sb2cpO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGluaXRTZXJ2ZXIoc2VydmVyT3B0aW9uczogYW55KSB7XHJcbiAgaWYgKHR5cGVvZiBzZXJ2ZXJPcHRpb25zICE9PSAnb2JqZWN0Jykge1xyXG4gICAgc2VydmVyT3B0aW9ucyA9IHt9O1xyXG4gIH1cclxuXHJcbiAgc2VydmVyT3B0aW9ucyA9IG1lcmdlRGVlcCh7fSwgY29uZmlnLCBzZXJ2ZXJPcHRpb25zKTtcclxuICBkZWZhdWx0TG9nZ2VyLmxldmVsID0gc2VydmVyT3B0aW9ucy5sb2cubGV2ZWw7XHJcblxyXG4gIHNldE1heExpc3RuZXJzKHNlcnZlck9wdGlvbnMpO1xyXG5cclxuICBjb25zdCBhcHAgPSBleHByZXNzKCk7XHJcbiAgY29uc3QgUE9SVCA9IHByb2Nlc3MuZW52LlBPUlQgfHwgc2VydmVyT3B0aW9ucy5wb3J0O1xyXG5cclxuICBhcHAudXNlKFxyXG4gICAgY29ycyh7XHJcbiAgICAgIG9yaWdpbjogJyonLFxyXG4gICAgfSlcclxuICApO1xyXG4gIGFwcC51c2UoZXhwcmVzcy5qc29uKHsgbGltaXQ6ICc1MG1iJyB9KSk7XHJcbiAgYXBwLnVzZShleHByZXNzLnVybGVuY29kZWQoeyBsaW1pdDogJzUwbWInLCBleHRlbmRlZDogdHJ1ZSB9KSk7XHJcbiAgYXBwLnVzZSgnL2ZpbGVzJywgZXhwcmVzcy5zdGF0aWMoJ1doYXRzQXBwSW1hZ2VzJykpO1xyXG4gIGFwcC51c2UoYm9vbFBhcnNlcigpKTtcclxuXHJcbiAgaWYgKGNvbmZpZz8uYXdzX3MzPy5hY2Nlc3Nfa2V5X2lkICYmIGNvbmZpZz8uYXdzX3MzPy5zZWNyZXRfa2V5KSB7XHJcbiAgICBwcm9jZXNzLmVudlsnQVdTX0FDQ0VTU19LRVlfSUQnXSA9IGNvbmZpZy5hd3NfczMuYWNjZXNzX2tleV9pZDtcclxuICAgIHByb2Nlc3MuZW52WydBV1NfU0VDUkVUX0FDQ0VTU19LRVknXSA9IGNvbmZpZy5hd3NfczMuc2VjcmV0X2tleTtcclxuICB9XHJcblxyXG4gIC8vIEFkZCByZXF1ZXN0IG9wdGlvbnNcclxuICBhcHAudXNlKChyZXE6IGFueSwgcmVzOiBhbnksIG5leHQ6IE5leHRGdW5jdGlvbikgPT4ge1xyXG4gICAgcmVxLnNlcnZlck9wdGlvbnMgPSBzZXJ2ZXJPcHRpb25zO1xyXG4gICAgcmVxLmxvZ2dlciA9IGxvZ2dlcjtcclxuICAgIHJlcS5pbyA9IGlvIGFzIGFueTtcclxuXHJcbiAgICBjb25zdCBvbGRTZW5kID0gcmVzLnNlbmQ7XHJcblxyXG4gICAgcmVzLnNlbmQgPSBhc3luYyBmdW5jdGlvbiAoZGF0YTogYW55KSB7XHJcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSByZXEuaGVhZGVyc1snY29udGVudC10eXBlJ107XHJcbiAgICAgIGlmIChjb250ZW50ID09ICdhcHBsaWNhdGlvbi9qc29uJykge1xyXG4gICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xyXG4gICAgICAgIGlmICghZGF0YS5zZXNzaW9uKSBkYXRhLnNlc3Npb24gPSByZXEuY2xpZW50ID8gcmVxLmNsaWVudC5zZXNzaW9uIDogJyc7XHJcbiAgICAgICAgaWYgKGRhdGEubWFwcGVyICYmIHJlcS5zZXJ2ZXJPcHRpb25zLm1hcHBlci5lbmFibGUpIHtcclxuICAgICAgICAgIGRhdGEucmVzcG9uc2UgPSBhd2FpdCBjb252ZXJ0KFxyXG4gICAgICAgICAgICByZXEuc2VydmVyT3B0aW9ucy5tYXBwZXIucHJlZml4LFxyXG4gICAgICAgICAgICBkYXRhLnJlc3BvbnNlLFxyXG4gICAgICAgICAgICBkYXRhLm1hcHBlclxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIGRlbGV0ZSBkYXRhLm1hcHBlcjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmVzLnNlbmQgPSBvbGRTZW5kO1xyXG4gICAgICByZXR1cm4gcmVzLnNlbmQoZGF0YSk7XHJcbiAgICB9O1xyXG4gICAgbmV4dCgpO1xyXG4gIH0pO1xyXG5cclxuICBhcHAudXNlKHJvdXRlcyk7XHJcblxyXG4gIGNyZWF0ZUZvbGRlcnMoKTtcclxuICBjb25zdCBodHRwID0gY3JlYXRlU2VydmVyKGFwcCk7XHJcbiAgY29uc3QgaW8gPSBuZXcgU29ja2V0KGh0dHAsIHtcclxuICAgIGNvcnM6IHtcclxuICAgICAgb3JpZ2luOiAnKicsXHJcbiAgICB9LFxyXG4gIH0pO1xyXG5cclxuICBpby5vbignY29ubmVjdGlvbicsIChzb2NrKSA9PiB7XHJcbiAgICBsb2dnZXIuaW5mbyhgSUQ6ICR7c29jay5pZH0gZW50cm91YCk7XHJcblxyXG4gICAgc29jay5vbignZGlzY29ubmVjdCcsICgpID0+IHtcclxuICAgICAgbG9nZ2VyLmluZm8oYElEOiAke3NvY2suaWR9IHNhaXVgKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBodHRwLmxpc3RlbihQT1JULCAoKSA9PiB7XHJcbiAgICBsb2dnZXIuaW5mbyhgU2VydmVyIGlzIHJ1bm5pbmcgb24gcG9ydDogJHtQT1JUfWApO1xyXG4gICAgbG9nZ2VyLmluZm8oXHJcbiAgICAgIGBcXHgxYlszMW0gVmlzaXQgJHtzZXJ2ZXJPcHRpb25zLmhvc3R9OiR7UE9SVH0vYXBpLWRvY3MgZm9yIFN3YWdnZXIgZG9jc2BcclxuICAgICk7XHJcbiAgICBsb2dnZXIuaW5mbyhgV1BQQ29ubmVjdC1TZXJ2ZXIgdmVyc2lvbjogJHt2ZXJzaW9ufWApO1xyXG5cclxuICAgIGlmIChzZXJ2ZXJPcHRpb25zLnN0YXJ0QWxsU2Vzc2lvbikgc3RhcnRBbGxTZXNzaW9ucyhzZXJ2ZXJPcHRpb25zLCBsb2dnZXIpO1xyXG4gIH0pO1xyXG5cclxuICBpZiAoY29uZmlnLmxvZy5sZXZlbCA9PT0gJ2Vycm9yJyB8fCBjb25maWcubG9nLmxldmVsID09PSAnd2FybicpIHtcclxuICAgIGNvbnNvbGUubG9nKGBcXHgxYlszM20gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbkF0dGVudGlvbjpcclxuWW91ciBjb25maWd1cmF0aW9uIGlzIGNvbmZpZ3VyZWQgdG8gc2hvdyBvbmx5IGEgZmV3IGxvZ3MsIGJlZm9yZSBvcGVuaW5nIGFuIGlzc3VlLCBcclxucGxlYXNlIHNldCB0aGUgbG9nIHRvICdzaWxseScsIGNvcHkgdGhlIGxvZyB0aGF0IHNob3dzIHRoZSBlcnJvciBhbmQgb3BlbiB5b3VyIGlzc3VlLlxyXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuYCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgYXBwLFxyXG4gICAgcm91dGVzLFxyXG4gICAgbG9nZ2VyLFxyXG4gIH07XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBZ0JBLElBQUFBLFdBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLEtBQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFHLFFBQUEsR0FBQUQsc0JB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